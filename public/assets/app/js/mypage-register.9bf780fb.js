(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mypage-register"],{"20cc":function(e,t,a){},"47ba":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("g-breadcrumb",{attrs:{breadcrumbs:[{to:"/",name:"トップ"},{to:null,name:"本登録"}]}}),a("g-page-title",{staticClass:"w-full mb-4",attrs:{title:"本登録",icon:"sign-in-alt"}}),a("div",{staticClass:"flex justify-center items-center lg:p-6"},[a("div",{staticClass:"w-full max-w-2xl"},[a("div",{staticClass:"my-8"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("t-input-group",{attrs:{label:"企業名",status:e.companyNameWarning||e.formState("company.name").status,feedback:e.companyNameWarningMessage||e.formState("company.name").message}},[a("g-input-help-text",{attrs:{text:"企業名称は正式名称をご記入ください。"}}),a("g-searching-input",{attrs:{label:"企業名",loading:e.companyLoading,status:e.companyNameWarning||e.formState("company.name").status},model:{value:e.form.company.name,callback:function(t){e.$set(e.form.company,"name",t)},expression:"form.company.name"}})],1),a("t-input-group",{attrs:{label:"業態",status:e.formState("company.businessCategoryIds").status,feedback:e.formState("company.businessCategoryIds").message}},[a("t-checkbox-group",{attrs:{name:"checkbox-group",options:e.businessCategoryOption,status:e.formState("company.businessCategoryIds").status,disabled:e.existsCompany},model:{value:e.form.company.businessCategoryIds,callback:function(t){e.$set(e.form.company,"businessCategoryIds",t)},expression:"form.company.businessCategoryIds"}})],1),a("div",{staticClass:"lg:flex"},[a("div",{staticClass:"w-full lg:w-1/2"},[a("t-input-group",{attrs:{label:"郵便番号",status:e.formState("company.postalCode").status,feedback:e.formState("company.postalCode").message}},[a("g-input-help-text",{attrs:{text:"海外に住所がある場合、空欄で住所のみご記入ください。"}}),a("g-searching-input",{attrs:{label:"郵便番号",loading:e.addressLoading,status:e.formState("company.postalCode").status,disabled:e.existsCompany},model:{value:e.form.company.postalCode,callback:function(t){e.$set(e.form.company,"postalCode",t)},expression:"form.company.postalCode"}})],1)],1)]),a("t-input-group",{attrs:{label:"住所",status:e.formState("company.address").status,feedback:e.formState("company.address").message}},[a("t-input",{attrs:{type:"text",label:"住所",disabled:e.existsCompany},model:{value:e.form.company.address,callback:function(t){e.$set(e.form.company,"address",t)},expression:"form.company.address"}})],1),a("div",{staticClass:"my-4 border-b border-gray-500"}),a("t-input-group",{attrs:{label:"担当者氏名",status:e.formState("profile.name").status,feedback:e.formState("profile.name").message}},[a("div",{staticClass:"lg:flex"},[a("t-input",{staticClass:"mb-2 lg:mb-0 lg:mr-2",attrs:{type:"text",label:"担当者: 姓",placeholder:"山田",status:e.formState("profile.name").status},model:{value:e.form.profile.lastName,callback:function(t){e.$set(e.form.profile,"lastName",t)},expression:"form.profile.lastName"}}),a("t-input",{attrs:{type:"text",label:"担当者: 名",placeholder:"太郎",status:e.formState("profile.name").status},model:{value:e.form.profile.firstName,callback:function(t){e.$set(e.form.profile,"firstName",t)},expression:"form.profile.firstName"}})],1)]),a("t-input-group",{attrs:{label:"部署",status:e.formState("employee.department").status,feedback:e.formState("employee.department").message}},[a("t-input",{attrs:{type:"text",label:"部署",status:e.formState("employee.department").status},model:{value:e.form.employee.department,callback:function(t){e.$set(e.form.employee,"department",t)},expression:"form.employee.department"}})],1),a("t-button",{staticClass:"mt-10 w-full",attrs:{type:"submit",variant:"primary",size:"lg"}},[e._v(" "+e._s(e.existsCompany?"参加申請する":"本登録する")+" ")])],1)])])])],1)},n=[],r=(a("a4d3"),a("99af"),a("4de4"),a("7db0"),a("b0c0"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("ade3")),o=a("2f62"),i=a("ba6a"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticClass:"my-1 text-gray-600 text-xs"},[e._v(e._s(e.text))])},c=[],m={props:{text:{type:String,require:!0,default:null}}},p=m,u=a("2877"),f=Object(u["a"])(p,l,c,!1,null,null,null),d=f.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"relative"},[a("t-input",{staticClass:"pr-10",attrs:{type:"text",label:e.label,status:e.status,disabled:e.disabled},on:{input:e.updateInput}}),e.loading?a("span",{staticClass:"absolute top-0 right-0 mt-6 mr-5"},[a("g-spinner")],1):e._e()],1)},b=[],g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"spinner"})},h=[],C=(a("565b"),{}),v=Object(u["a"])(C,g,h,!1,null,"655929ba",null),x=v.exports,S={components:{GSpinner:x},props:{label:{type:String,require:!1,default:null},loading:{type:Boolean,require:!0,default:!1},status:{type:String,require:!1,default:null},disabled:{type:Boolean,require:!1,default:!1}},methods:{updateInput:function(e){this.$emit("input",e)}}},O=S,w=Object(u["a"])(O,y,b,!1,null,null,null),N=w.exports,k=a("86a4"),j=a("23bd");function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _={components:{GInputHelpText:d,GSearchingInput:N,GPageTitle:k["a"],GBreadcrumb:j["a"]},data:function(){return{form:{company:{name:null,postalCode:null,address:null,businessCategoryIds:[]},profile:{firstName:null,lastName:null},employee:{department:null}},companyLoading:!1,addressLoading:!1,existsCompany:!1,errors:{},fetchCompanyByNameCancel:null,fetchAdderssByCodeCancel:null}},computed:$({fullName:function(){return this.form.profile.firstName&&this.form.profile.lastName?this.form.profile.lastName+this.form.profile.firstName:null},companyNameWarning:function(){return this.existsCompany?"warning":null},companyNameWarningMessage:function(){return this.existsCompany?"既に登録されている企業です。":null}},Object(o["c"])({businessCategoryOption:"config/businessCategoryOption"})),methods:$({formState:function(e){return this.errors&&this.errors[e]&&0<this.errors[e].length?{status:"error",message:this.errors[e][0]}:{status:null,message:null}},fetchCompanyByName:function(e){var t=this;if(!e)return this.errors["company.name"]=["企業名を入力してください。"],void(this.companyLoading=!1);this.fetchCompanyByNameCancel&&this.fetchCompanyByNameCancel();var a,s=i["a"].CancelToken;this.companyLoading=!0,i["a"].get("/api/companies",{params:{name:e},cancelToken:new s((function(e){a=e}))}).then((function(a){t.companyLoading=!1;var s=a.data.data||null;t.existsCompany=!!s&&s.find((function(t){return t.name===e})),t.errors["company.name"]=null})).catch((function(e){i["a"].isCancel(e)||(t.companyLoading=!1,t.errors["company.name"]=[e.response.data.message])})),this.fetchCompanyByNameCancel=a},fetchAdderssByCode:function(e){var t=this;!this.fetchAdderssByCodeCancel&&e||this.fetchAdderssByCodeCancel();var a,s=i["a"].CancelToken;this.addressLoading=!0,i["a"].get("/api/address/search",{params:{code:e},cancelToken:new s((function(e){a=e}))}).then((function(e){t.addressLoading=!1;var a=e.data.data[0]||null;a&&(t.form.company.address="".concat(a.address1).concat(a.address2).concat(a.address3),t.errors["company.postalCode"]=null)})).catch((function(e){i["a"].isCancel(e)||(t.addressLoading=!1,t.errors["company.postalCode"]=[e.response.data.message])})),this.fetchAdderssByCodeCancel=a},onSubmit:function(){var e=this,t=this.form,a=t.company,s=t.employee;this.initileze({company:a,employee:s,profile:{name:this.fullName}}).then((function(){e.$router.push("/mypage")})).catch((function(t){var a=t.response,s=a.data.errors;s&&(e.errors=s)}))}},Object(o["b"])({initileze:"auth/initileze"})),watch:{"form.company.name":function(e,t){e!==t&&this.fetchCompanyByName(e)},"form.company.postalCode":function(e,t){e!==t&&this.fetchAdderssByCode(e)}}},I=_,L=Object(u["a"])(I,s,n,!1,null,null,null);t["default"]=L.exports},"565b":function(e,t,a){"use strict";var s=a("20cc"),n=a.n(s);n.a},"7db0":function(e,t,a){"use strict";var s=a("23e7"),n=a("b727").find,r=a("44d2"),o="find",i=!0;o in[]&&Array(1)[o]((function(){i=!1})),s({target:"Array",proto:!0,forced:i},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)},"99af":function(e,t,a){"use strict";var s=a("23e7"),n=a("d039"),r=a("e8b5"),o=a("861d"),i=a("7b0b"),l=a("50c4"),c=a("8418"),m=a("65f0"),p=a("1dde"),u=a("b622"),f=a("60ae"),d=u("isConcatSpreadable"),y=9007199254740991,b="Maximum allowed index exceeded",g=f>=51||!n((function(){var e=[];return e[d]=!1,e.concat()[0]!==e})),h=p("concat"),C=function(e){if(!o(e))return!1;var t=e[d];return void 0!==t?!!t:r(e)},v=!g||!h;s({target:"Array",proto:!0,forced:v},{concat:function(e){var t,a,s,n,r,o=i(this),p=m(o,0),u=0;for(t=-1,s=arguments.length;t<s;t++)if(r=-1===t?o:arguments[t],C(r)){if(n=l(r.length),u+n>y)throw TypeError(b);for(a=0;a<n;a++,u++)a in r&&c(p,u,r[a])}else{if(u>=y)throw TypeError(b);c(p,u++,r)}return p.length=u,p}})}}]);
//# sourceMappingURL=mypage-register.9bf780fb.js.map